# [Ð¡Ð¿Ñ€Ð°Ð²Ð¾Ñ‡Ð½Ð¸Ðº Ð±ÑƒÑ…Ð³Ð°Ð»Ñ‚ÐµÑ€Ð°](https://t.me/accountOBU_bot)
## __Telegram Bot by AuF__

---
+ ## RU
Ð”Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð±Ð¾Ñ‚Ð° Ñ ÑÐ´ÐµÐ»Ð°Ð» Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð³Ð¾ Ð¾Ð¿Ñ‹Ñ‚Ð° Ð² Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ.
Ð¡Ð¾Ð·Ð´Ð°Ð²Ð°Ñ Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ñ ÑÑ‚Ð¾Ð»ÐºÐ½ÑƒÐ»ÑÑ Ñ Ð½Ð¾Ð²Ñ‹Ð¼Ð¸ Ð¸ ÑÑ‚Ð°Ñ€Ñ‹Ð¼Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°Ð¼Ð¸, Ð½Ð¾ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ñ ÑÐ¼Ð¾Ð³ 
Ð² Ð¿Ð¾Ð»Ð½Ð¾Ð¹ Ð¼ÐµÑ€Ðµ Ñ€ÐµÑˆÐ¸Ñ‚ÑŒ. Ð¢ÐµÐ¼ ÐºÑ‚Ð¾ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ñ‡Ð°ÑÑ‚Ð¸Ñ‡Ð½Ð¾ ÐºÐ¾Ð´Ð¸Ð½Ð³, Ð½Ð°Ð´ÐµÑŽÑÑŒ Ð²Ñ‹ Ð¾Ñ†ÐµÐ½Ð¸Ñ‚Ðµ Ð¼Ð¾Ð¸
ÑÑ‚Ð°Ñ€Ð°Ð½Ð¸Ñ Ð¸ ÑÐ¾Ð±Ð»ÑŽÐ´ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð°Ð¼ ``PEP8``.

Ð’ Ð´Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐµÐ¼ Ñ Ð±ÑƒÐ´Ñƒ Ð´Ð°Ð»ÑŒÑˆÐµ Ñ€Ð°Ð·Ð²Ð¸Ð²Ð°Ñ‚ÑŒ ÑÑ‚Ð¾Ñ‚ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÑ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÐµÐ¹ Ð¸ ÑƒÐ»ÑƒÑ‡ÑˆÐ°Ñ 
ÑƒÐ¶Ðµ Ð¸Ð¼ÐµÑŽÑ‰Ð¸ÐµÑÑ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸ Ð±Ð¾Ñ‚Ð°.

ÐœÐ¾Ð¶ÐµÑ‚Ðµ Ð¿Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ ÐºÐ°Ðº Ñ Ð¿Ð¸ÑÐ°Ð» Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð½Ð¾ Ñ‚Ð°ÐºÐ¾Ð³Ð¾ Ð¶Ðµ Ð±Ð¾Ñ‚Ð° Ñ€Ð°Ð½Ð½ÐµÐµ Ð¿Ð¾ÑÐ»Ðµ 2-Ñ… Ð¼ÐµÑÑÑ†ÐµÐ² Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ñ
``Python3``
ÐÐ°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð² Ð¿Ð°Ð¿ÐºÐµ ``old_bot``. Ð˜ ÑÑ€Ð°Ð²Ð½Ð¸Ñ‚ÑŒ Ñ Ñ‚ÐµÐ¼ ÐºÐ°Ðº Ñ Ð¿Ð¸ÑˆÑƒ ÑÐµÐ¹Ñ‡Ð°Ñ.

___
##### ÐÐµÐ±Ð¾Ð»ÑŒÑˆÐ°Ñ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ñ
___
>Data/config/config.py
```doctest
import os
from dotenv import load_dotenv

load_dotenv()

admins_id = [os.getenv('Your_list_of_admins')]
API_KEY = os.getenv('Your_API')
```

Ð’ ÑÑ‚Ð¾Ð¹ Ñ‡Ð°ÑÑ‚Ð¸ ÑÐ¾Ð²ÐµÑ‚ÑƒÑŽ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ ``.env`` Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ÑÐ²Ð¾Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ
Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð½ÐµÑ‘ Ð´Ð»Ñ Ð²Ð°ÑˆÐµÐ¹ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸, Ð½Ð¾ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚ÑŒ Ð¸ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ

Ð¡Ð¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ð¶Ðµ Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» Ð½ÑƒÐ¶Ð½Ð¾ Ð² ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¼ Ð¿ÑƒÑ‚Ðµ: ``Data/config/.env``

---
- ### __ÐÐ°Ñ‡Ð°Ð»Ð¾__

---
![Bot Commands](image/Commands.jpg)

ÐŸÐµÑ€Ð²Ð¾Ðµ Ñ‡Ñ‚Ð¾ Ð²Ñ‹ Ð²Ð¸Ð´Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÐµ Ð´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð±Ð¾Ñ‚Ð°.

---
- ### __User Panel__

---
![User panel](image/userPanel.jpg)

Ð¢Ð°ÐºÐ¸Ð¼ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð¼ Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ Ð¿Ð°Ð½ÐµÐ»ÑŒ ÐºÐ½Ð¾Ð¿Ð¾Ðº Ñƒ Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ.

---
- ### __Admin Panel__

---
![Admin panel](image/adminPanel.jpg)

Ð”Ð°Ð½Ð½Ñ‹Ð¼ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð¼ Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ñƒ Ð°Ð´Ð¼Ð¸Ð½Ð¾Ð² Ð±Ð¾Ñ‚Ð°.

>ÐŸÐ°Ð½ÐµÐ»ÑŒ ÐºÐ½Ð¾Ð¿Ð¾Ðº Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð² ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¼ Ñ„Ð°Ð¹Ð»Ðµ
>>keyboards/default/start_kb.py
```doctest
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton

# ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ ÑÐ¿Ð¸ÑÐ¾Ðº ÐºÐ½Ð¾Ð¿Ð¾Ðº
keyboard = [
    [
        KeyboardButton(text='ðŸŽ“ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð½Ð°Ð½Ð¸Ð¹')
    ],
    [
        KeyboardButton(text='â„¹ï¸Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ')
    ],
    [
        KeyboardButton(text='Ð ÐµÐºÐ»Ð°Ð¼Ð° ðŸŽ¥'),
        KeyboardButton(text='Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° ðŸ“Š')
    ]
]

# Ð¡Ð¿Ð¸ÑÐ¾Ðº ÐºÐ½Ð¾Ð¿Ð¾Ðº Ð´Ð»Ñ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
start_kb = ReplyKeyboardMarkup(row_width=2,
                               keyboard=keyboard[:-1],
                               resize_keyboard=True
                               )
# Ð¡Ð¿Ð¸ÑÐ¾Ðº ÐºÐ½Ð¾Ð¿Ð¾Ðº Ð´Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¾Ð²
admin_kb = ReplyKeyboardMarkup(row_width=2,
                               keyboard=keyboard,
                               resize_keyboard=True
                               )
```
ÐžÐ±Ñ€ÐµÐ· ÑÐ¿Ð¸ÑÐºÐ° ``keyboard[:-1]`` Ð¼Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð¸Ð· Ð¼Ð°ÑÑÐ¸Ð²Ð° Ð²ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ ÐºÑ€Ð¾Ð¼Ðµ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾.
Ð’ Ñ†ÐµÐ»Ð¾Ð¼ Ð¾Ð±ÑŠÐµÐºÑ‚Ñ‹ ``start_kb`` Ð¸ ``admin_kb`` Ð½Ð°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐºÐ¾Ð¼ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾. ÐžÐ½Ð¸ ÑÐ²Ð»ÑÑŽÑ‚ÑÑ
ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð°Ð¼Ð¸ ÐºÐ»Ð°ÑÑÐ° ``ReplyKeyboardMurkup``, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð² ÑÐ²Ð¾ÑŽ Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ ÑÐ»Ð¾Ð²Ð°Ñ€ÑŒ.
Ð˜ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ ÑÑ‚Ð¾Ð³Ð¾ ÑÐ»Ð¾Ð²Ð°Ñ€Ñ Ð² ÐºÐ»ÑŽÑ‡Ðµ ``keyboard`` Ð»ÐµÐ¶Ð¸Ñ‚ Ð½Ð°Ñˆ ÑÐ¿Ð¸ÑÐ¾Ðº Ñ ÐºÐ½Ð¾Ð¿Ð¾Ñ‡ÐºÐ°Ð¼Ð¸. 


- ### Ð Ð°ÑÑÑ‹Ð»ÐºÐ°
>handlers/admins/admin.py
```doctest
@dp.message_handler(state=State_Advertising.photo, content_types=types.ContentType.PHOTO)
async def photo_(message: types.Message, state: FSMContext):
    photo_id = message.photo[-1].file_id
    # ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð¾Ñ‚Ð¾ Ð² Ð¿Ð°Ð¼ÑÑ‚Ð¸
    await state.update_data(photo=photo_id)
    data = await state.get_data()
    # ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· 
    text = data.get('text')
    photo = data.get('photo')
    text = data.get('text')
    
    id_list = await db.len_user_id()
    i = 0
    # Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ Ñ†Ð¸ÐºÐ» Ð¿ÐµÑ€ÐµÐ±Ð¾Ñ€Ð° Ð²ÑÐµÑ… user_id Ð² DB
    for user_id in id_list:
        # ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ÑÑ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼
        await dp.bot.send_photo(chat_id=user_id[0], photo=photo, caption=text)
        i += 1

    await message.answer(text=f'Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¾:\n{i=}')
    # Ð’Ñ‹Ñ…Ð¾Ð´ Ð¸Ð· ÐœÐ°ÑˆÐ¸Ð½Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ
    await state.finish()
```
ÐÐ°ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½Ð¾ Ð²Ð°Ð¼ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÑŽ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Python File Ð½Ð°Ñ…Ð¾Ð´ÑÑ‰Ð¸Ð¹ÑÑ Ð² ``handlers/admins/admin.py``
Ð¢Ð°Ðº Ð½Ð°Ð·Ñ‹Ð²Ð°ÐµÐ¼Ð°Ñ __ÐœÐ°ÑˆÐ¸Ð½Ð¾ Ð¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ.__ 

###### ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð½Ð° ÑÑ‚Ð¾Ð³Ð¾ Ð±Ð¾Ñ‚Ð° ÑÐ¼Ð¾Ð¶ÐµÑ‚Ðµ Ð½Ð°Ð¶Ð°Ð² Ð½Ð° > [OBU_bot](https://t.me/accountOBU_bot) <
Ð˜Ð»Ð¸ Ð¶Ðµ Ð¿ÐµÑ€ÐµÐ¹Ð´Ñ Ð¿Ð¾ Ð³Ð»Ð°Ð²Ð½Ð¾Ð¼Ñƒ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÑƒ. 

---
+ ## ENG 
I made this bot to get a lot of experience in programming.
When I was creating the project, I ran into new and old problems, but I decided to handle everything. 
For those who understand this partial coding, I hope you appreciate my
diligence and adherence to __PEP8__ standards.

In the future, I will further develop this project by adding more features and improving
existing bot abilities.

You can see how I wrote about the same bot earlier after two months of training
``Python3``
Be located in the ``old_bot`` folder. And compare how I write now.

___
##### Small recommendation
___
>Data/config/config.py
```doctest
import os
from dotenv import load_dotenv

load_dotenv()

admins_id = [os.getenv('Your_list_of_admins')]
API_KEY = os.getenv('Your_API')
```

In this part, I advise you to create an environment variable file ``.env`` and save your data
inside it for your safety, but you can also pass it directly

You need to create this file in the path: ``Data/config/.env``

---
- ### __The Start__

---
![Bot Commands](image/Commands.jpg)

The first thing you see when you start this bot.

---
- ### __User Panel__

---
![User panel](image/userPanel.jpg)

It is what the button bar looks like for a user.

---
- ### __Admin Panel__

---
![Admin panel](image/adminPanel.jpg)

It is what the button bar looks like for an admin.

>The button bar has been made in the following file
>>keyboards/default/start_kb.py
```doctest
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton

# Full list of buttons
keyboard = [
    [
        KeyboardButton(text='ðŸŽ“ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð½Ð°Ð½Ð¸Ð¹')
    ],
    [
        KeyboardButton(text='â„¹ï¸Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ')
    ],
    [
        KeyboardButton(text='Ð ÐµÐºÐ»Ð°Ð¼Ð° ðŸŽ¥'),
        KeyboardButton(text='Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° ðŸ“Š')
    ]
]

# List of buttons for regular users
start_kb = ReplyKeyboardMarkup(row_width=2,
                                keyboard=keyboard[:-1],
                                resize_keyboard=True
                                )
# List of buttons for admins
admin_kb = ReplyKeyboardMarkup(row_width=2,
                                keyboard=keyboard,
                                resize_keyboard=True
                                )
```
Trimming the list ``keyboard[:-1]`` we get all the elements from the array except the last one.
Objects ``start_kb`` and ``admin_kb`` are wrong to call a list. They are
instances of the ``ReplyKeyboardMurkup`` class, which returns a dictionary.
And inside this dictionary, the ``keyboard`` key is our list of buttons.


- ### Mailloop
>handlers/admins/admin.py
```doctest
@dp.message_handler(state=State_Advertising.photo, content_types=types.ContentType.PHOTO)
async def photo_(message: types.Message, state: FSMContext):
     photo_id = message.photo[-1].file_id
     # Update photo data in memory
     await state.update_data(photo=photo_id)
     data = await state.get_data()
     # Get data from
     text = data.get('text')
     photo = data.get('photo')
     text = data.get('text')
    
     id_list = await db.len_user_id()
     i = 0
     # Run a loop through all user_ids in the DB
     for user_id in id_list:
         # Send messages to users
         await dp.bot.send_photo(chat_id=user_id[0], photo=photo, caption=text)
         i += 1

     await message.answer(text=f'Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¾:\n{i=}')
     # Exit Machine State
     await state.finish()
```

I strongly recommend that you look at the Python File located in ``handlers/admins/admin.py``
The so-called __Machine Condition.__
###### You can view this bot by clicking on > [OBU_bot](https://t.me/accountOBU_bot) <
Or by clicking on the main heading.