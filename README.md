# –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞
## __Telegram Bot by AuF__

---
+ ## RU
–î–∞–Ω–Ω–æ–≥–æ –±–æ—Ç–∞ —è —Å–¥–µ–ª–∞–ª –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–ª—å—à–æ–≥–æ –æ–ø—ã—Ç–∞ –≤–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ.
–°–æ–∑–¥–∞–≤–∞—è –¥–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —è —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –Ω–æ–≤—ã–º–∏ —Å—Ç–∞—Ä—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏, –Ω–æ –∫–æ—Ç–æ—Ä—ã–µ —è —Å–º–æ–≥ 
–≤ –ø–æ–ª–Ω–æ–π –º–µ—Ä–µ —Ä–µ—à–∏—Ç—å. –¢–µ–º –∫—Ç–æ –ø–æ–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–π —á–∞—Å—Ç–∏—á–Ω–æ –∫–æ–¥–∏–Ω–≥, –Ω–∞–¥–µ—é—Å—å –≤—ã –æ—Ü–µ–Ω–∏—Ç–µ –º–æ–∏
—Å—Ç–∞—Ä–∞–Ω–∏—è –∏ —Å–æ–±–ª—é–¥–µ–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º ``PEP8``.

–í –¥–∞–ª—å–Ω–µ–π—à–µ–º —è –±—É–¥—É –¥–∞–ª—å—à–µ —Ä–∞–∑–≤–∏–≤–∞—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–æ–±–∞–≤–ª—è—è –±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏ —É–ª—É—á—à–∞—è 
—É–∂–µ –∏–º–µ—é—â–∏–µ—Å—è —Å–ø–æ–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞.

–ú–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫ —è –ø–∏—Å–∞–ª –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–≥–æ –∂–µ –±–æ—Ç–∞ —Ä–∞–Ω–Ω–µ–µ –ø–æ—Å–ª–µ 2-—Ö –º–µ—Å—è—Ü–µ–≤ –æ–±—É—á–µ–Ω–∏—è
``Python3``
–ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ ``old_bot``. –ò —Å—Ä–∞–≤–Ω–∏—Ç—å —Å —Ç–µ–º –∫–∞–∫ —è –ø–∏—à—É —Å–µ–π—á–∞—Å.

___
##### –ù–µ–±–æ–ª—å—à–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
___
>Data/config/config.py
```doctest
import os
from dotenv import load_dotenv

load_dotenv()

admins_id = [os.getenv('Your_list_of_admins')]
API_KEY = os.getenv('Your_API')
```

–í —ç—Ç–æ–π —á–∞—Å—Ç–∏ —Å–æ–≤–µ—Ç—É—é —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è ``.env`` –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
–≤–Ω—É—Ç—Ä–∏ –Ω–µ—ë –¥–ª—è –≤–∞—à–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –Ω–æ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å –∏ –Ω–∞–ø—Ä—è–º—É—é

–°–æ–∑–¥–∞–≤–∞—Ç—å –∂–µ –¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω—É–∂–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø—É—Ç–µ: ``Data/config/.env``

---
- ### __–ù–∞—á–∞–ª–æ__

---
![Bot Commands](image/Commands.jpg)
–ü–µ—Ä–≤–æ–µ —á—Ç–æ –≤—ã –≤–∏–¥–∏—Ç–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –¥–∞–Ω–Ω–æ–≥–æ –±–æ—Ç–∞

---
- ### __User Panel__

---
![User panel](image/userPanel.jpg)
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –≤—ã–≥–ª—è–¥–∏—Ç –ø–∞–Ω–µ–ª—å –∫–Ω–æ–ø–æ–∫ —É –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
---
- ### __Admin Panel__

---
![Admin panel](image/adminPanel.jpg)
–î–∞–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤—ã–≥–ª—è–¥–∏—Ç –ø–∞–Ω–µ–ª—å —É –∞–¥–º–∏–Ω–æ–≤ –±–æ—Ç–∞

–ü–∞–Ω–µ–ª—å –∫–Ω–æ–ø–æ–∫ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–∞–π–ª–µ
>keyboards/default/start_kb.py
```doctest
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton

# –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–Ω–æ–ø–æ–∫
keyboard = [
    [
        KeyboardButton(text='üéì–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞–Ω–∏–π')
    ],
    [
        KeyboardButton(text='‚ÑπÔ∏è–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è')
    ],
    [
        KeyboardButton(text='–†–µ–∫–ª–∞–º–∞ üé•'),
        KeyboardButton(text='–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ üìä')
    ]
]

# –°–ø–∏—Å–æ–∫ –∫–Ω–æ–ø–æ–∫ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
start_kb = ReplyKeyboardMarkup(row_width=2,
                               keyboard=keyboard[:-1],
                               resize_keyboard=True
                               )
# –°–ø–∏—Å–æ–∫ –∫–Ω–æ–ø–æ–∫ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
admin_kb = ReplyKeyboardMarkup(row_width=2,
                               keyboard=keyboard,
                               resize_keyboard=True
                               )
```
–û–±—Ä–µ–∑ —Å–ø–∏—Å–∫–∞ ``keyboard[:-1]`` –º—ã –ø–æ–ª—É—á–∞–µ–º –∏–∑ –º–∞—Å—Å–∏–≤–∞ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ.
–í —Ü–µ–ª–æ–º –æ–±—ä–µ–∫—Ç—ã ``start_kb`` –∏ ``admin_kb`` –Ω–∞–∑—ã–≤–∞—Ç—å —Å–ø–∏—Å–∫–æ–º –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –û–Ω–∏ —è–≤–ª—è—é—Ç—Å—è
—ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –∫–ª–∞—Å—Å–∞ ``ReplyKeyboardMurkup``, –∫–æ—Ç–æ—Ä—ã–π –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å.
–ò –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è –≤ –∫–ª—é—á–µ ``keyboard`` –ª–µ–∂–∏—Ç –Ω–∞—à —Å–ø–∏—Å–æ–∫ —Å –∫–Ω–æ–ø–æ—á–∫–∞–º–∏.
- ### –†–∞—Å—Å—ã–ª–∫–∞
>handlers/admins/admin.py
```doctest
@dp.message_handler(state=State_Advertising.photo, content_types=types.ContentType.PHOTO)
async def photo_(message: types.Message, state: FSMContext):
    photo_id = message.photo[-1].file_id
    # –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ –≤ –ø–∞–º—è—Ç–∏
    await state.update_data(photo=photo_id)
    data = await state.get_data()
    # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ 
    text = data.get('text')
    photo = data.get('photo')
    text = data.get('text')
    
    id_list = await db.len_user_id()
    i = 0
    # –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ü–∏–∫–ª –ø–µ—Ä–µ–±–æ—Ä–∞ –≤—Å–µ—Ö user_id –≤ DB
    for user_id in id_list:
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
        await dp.bot.send_photo(chat_id=user_id[0], photo=photo, caption=text)
        i += 1

    await message.answer(text=f'–°–æ–æ–±—â–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ:\n{i=}')
    # –í—ã—Ö–æ–¥ –∏–∑ –ú–∞—à–∏–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    await state.finish()
```
–ù–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤–∞–º —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å Python File –Ω–∞—Ö–æ–¥—è—â–∏–π—Å—è –≤ ``handlers/admins/admin.py``
–¢–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º–∞—è __–ú–∞—à–∏–Ω–æ –°–æ—Å—Ç–æ—è–Ω–∏–µ.__ 

---
+ ## ENG
I made this bot to get a lot of experience in programming.
Creating this project, I ran into new old problems, but which I was able to
fully resolve. For those who understand this partial coding, I hope you appreciate my
diligence and adherence to __PEP8__ standards

In the future, I will further develop this project by adding more features and improving
existing bot abilities.

You can see how I wrote about the same bot earlier after 2 months of training
``Python3``
Located in the ``old_bot`` folder. And compare with how I write now.

___
##### Small recommendation
___
>Data/config/config.py
```doctest
import os
from dotenv import load_dotenv

load_dotenv()

admins_id = [os.getenv('Your_list_of_admins')]
API_KEY = os.getenv('Your_API')
```

In this part, I advise you to create an environment variable file ``.env`` and save your data
inside it for your safety, but you can also pass it directly

You need to create this file in the next path: ``Data/config/.env``

---
- ### __The Start__

---
![Bot Commands](image/Commands.jpg)
The first thing you see when you start this bot

---
- ### __User Panel__

---
![User panel](image/userPanel.jpg)
This is how the button bar looks like for a regular user
---
- ### __Admin Panel__

---
![Admin panel](image/adminPanel.jpg)
This is how the panel for bot admins looks like

The button bar is prepared in the following file
>keyboards/default/start_kb.py
```doctest
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton

# Full list of buttons
keyboard = [
    [
        KeyboardButton(text='üéì–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞–Ω–∏–π')
    ],
    [
        KeyboardButton(text='‚ÑπÔ∏è–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è')
    ],
    [
        KeyboardButton(text='–†–µ–∫–ª–∞–º–∞ üé•'),
        KeyboardButton(text='–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ üìä')
    ]
]

# List of buttons for regular users
start_kb = ReplyKeyboardMarkup(row_width=2,
                                keyboard=keyboard[:-1],
                                resize_keyboard=True
                                )
# List of buttons for admins
admin_kb = ReplyKeyboardMarkup(row_width=2,
                                keyboard=keyboard,
                                resize_keyboard=True
                                )
```
Trimming the list ``keyboard[:-1]`` we get all the elements from the array except the last one.
In general, the objects ``start_kb`` and ``admin_kb`` are wrong to call a list. They are
instances of the ``ReplyKeyboardMurkup`` class, which in turn returns a dictionary.
And inside this dictionary in the ``keyboard`` key is our list of buttons.
- ### Newsletter
>handlers/admins/admin.py
```doctest
@dp.message_handler(state=State_Advertising.photo, content_types=types.ContentType.PHOTO)
async def photo_(message: types.Message, state: FSMContext):
     photo_id = message.photo[-1].file_id
     # Update photo data in memory
     await state.update_data(photo=photo_id)
     data = await state.get_data()
     # Get data from
     text = data.get('text')
     photo = data.get('photo')
     text = data.get('text')
    
     id_list = await db.len_user_id()
     i = 0
     # Run a loop through all user_ids in the DB
     for user_id in id_list:
         # Send messages to users
         await dp.bot.send_photo(chat_id=user_id[0], photo=photo, caption=text)
         i += 1

     await message.answer(text=f'–°–æ–æ–±—â–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ:\n{i=}')
     # Exit Machine State
     await state.finish()
```
I strongly recommend that you look at the Python File located in ``handlers/admins/admin.py``
The so-called __Machine Condition.__
